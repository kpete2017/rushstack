{"version":3,"file":"CommandLineParser.test.js","sourceRoot":"","sources":["../../src/test/CommandLineParser.test.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;AAE3D,0BAAoF;AAEpF,MAAM,UAAW,SAAQ,qBAAiB;IAIxC;QACE,KAAK,CAAC;YACJ,UAAU,EAAE,YAAY;YACxB,OAAO,EAAE,cAAc;YACvB,aAAa,EAAE,sBAAsB;SACtC,CAAC,CAAC;QARE,SAAI,GAAY,KAAK,CAAC;IAS7B,CAAC;IAES,KAAK,CAAC,SAAS;QACvB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IAES,kBAAkB;QAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC;YACpC,iBAAiB,EAAE,QAAQ;YAC3B,WAAW,EAAE,UAAU;SACxB,CAAC,CAAC;IACL,CAAC;CACF;AAED,MAAM,eAAgB,SAAQ,qBAAiB;IAC7C;QACE,KAAK,CAAC;YACJ,YAAY,EAAE,SAAS;YACvB,eAAe,EAAE,oBAAoB;SACtC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,CAAC,IAAI,UAAU,EAAE,CAAC,CAAC;IACnC,CAAC;IAES,kBAAkB;QAC1B,gBAAgB;IAClB,CAAC;CACF;AAED,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;IACjC,EAAE,CAAC,oBAAoB,EAAE,KAAK,IAAI,EAAE;QAClC,MAAM,iBAAiB,GAAoB,IAAI,eAAe,EAAE,CAAC;QAEjE,MAAM,iBAAiB,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAC;QAE1D,MAAM,CAAC,iBAAiB,CAAC,cAAc,CAAC,CAAC,WAAW,EAAE,CAAC;QACvD,MAAM,CAAC,iBAAiB,CAAC,cAAe,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;QAE3E,MAAM,MAAM,GAAe,iBAAiB,CAAC,cAA4B,CAAC;QAC1E,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport { CommandLineAction, CommandLineParser, CommandLineFlagParameter } from '..';\r\n\r\nclass TestAction extends CommandLineAction {\r\n  public done: boolean = false;\r\n  private _flag!: CommandLineFlagParameter;\r\n\r\n  public constructor() {\r\n    super({\r\n      actionName: 'do:the-job',\r\n      summary: 'does the job',\r\n      documentation: 'a longer description'\r\n    });\r\n  }\r\n\r\n  protected async onExecute(): Promise<void> {\r\n    expect(this._flag.value).toEqual(true);\r\n    this.done = true;\r\n  }\r\n\r\n  protected onDefineParameters(): void {\r\n    this._flag = this.defineFlagParameter({\r\n      parameterLongName: '--flag',\r\n      description: 'The flag'\r\n    });\r\n  }\r\n}\r\n\r\nclass TestCommandLine extends CommandLineParser {\r\n  public constructor() {\r\n    super({\r\n      toolFilename: 'example',\r\n      toolDescription: 'An example project'\r\n    });\r\n\r\n    this.addAction(new TestAction());\r\n  }\r\n\r\n  protected onDefineParameters(): void {\r\n    // no parameters\r\n  }\r\n}\r\n\r\ndescribe('CommandLineParser', () => {\r\n  it('executes an action', async () => {\r\n    const commandLineParser: TestCommandLine = new TestCommandLine();\r\n\r\n    await commandLineParser.execute(['do:the-job', '--flag']);\r\n\r\n    expect(commandLineParser.selectedAction).toBeDefined();\r\n    expect(commandLineParser.selectedAction!.actionName).toEqual('do:the-job');\r\n\r\n    const action: TestAction = commandLineParser.selectedAction as TestAction;\r\n    expect(action.done).toBe(true);\r\n  });\r\n});\r\n"]}
{"version":3,"file":"PnpmPackageManager.js","sourceRoot":"","sources":["../../../src/api/packageManager/PnpmPackageManager.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;;;;;;;;;;;;;;;;;;;;AAE3D,+CAAiC;AACjC,2CAA6B;AAE7B,6DAA0D;AAC1D,qDAAkD;AAElD;;GAEG;AACH,MAAa,kBAAmB,SAAQ,+BAAc;IAMpD,gBAAgB;IAChB,YAAmB,OAAe;QAChC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAEvB,MAAM,aAAa,GAAkB,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAEhE,IAAI,aAAa,CAAC,KAAK,IAAI,CAAC,EAAE;YAC5B,8BAA8B;YAC9B,IAAI,CAAC,iBAAiB,GAAG,6BAAa,CAAC,kBAAkB,CAAC;SAC3D;aAAM;YACL,IAAI,CAAC,iBAAiB,GAAG,6BAAa,CAAC,kBAAkB,CAAC;SAC3D;QAED,IAAI,CAAC,mBAAmB,GAAG,6BAAa,CAAC,wBAAwB,CAAC;QAElE,+BAA+B;QAC/B,yEAAyE;QACzE,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;IACxF,CAAC;IAED;;;;;OAKG;IACH,IAAW,gBAAgB;QACzB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;CACF;AAnCD,gDAmCC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport * as semver from 'semver';\r\nimport * as path from 'path';\r\n\r\nimport { RushConstants } from '../../logic/RushConstants';\r\nimport { PackageManager } from './PackageManager';\r\n\r\n/**\r\n * Support for interacting with the PNPM package manager.\r\n */\r\nexport class PnpmPackageManager extends PackageManager {\r\n  protected _pnpmfileFilename: string;\r\n\r\n  // example: node_modules/.pnpm/lock.yaml\r\n  public readonly internalShrinkwrapRelativePath: string;\r\n\r\n  /** @internal */\r\n  public constructor(version: string) {\r\n    super(version, 'pnpm');\r\n\r\n    const parsedVersion: semver.SemVer = new semver.SemVer(version);\r\n\r\n    if (parsedVersion.major >= 6) {\r\n      // Introduced in version 6.0.0\r\n      this._pnpmfileFilename = RushConstants.pnpmfileV6Filename;\r\n    } else {\r\n      this._pnpmfileFilename = RushConstants.pnpmfileV1Filename;\r\n    }\r\n\r\n    this._shrinkwrapFilename = RushConstants.pnpmV3ShrinkwrapFilename;\r\n\r\n    // node_modules/.pnpm/lock.yaml\r\n    // See https://github.com/pnpm/pnpm/releases/tag/v4.0.0 for more details.\r\n    this.internalShrinkwrapRelativePath = path.join('node_modules', '.pnpm', 'lock.yaml');\r\n  }\r\n\r\n  /**\r\n   * The filename of the shrinkwrap file that is used by the package manager.\r\n   *\r\n   * @remarks\r\n   * Example: `pnpmfile.js` or `.pnpmfile.cjs`\r\n   */\r\n  public get pnpmfileFilename(): string {\r\n    return this._pnpmfileFilename;\r\n  }\r\n}\r\n"]}
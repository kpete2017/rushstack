{"version":3,"file":"CleanAction.js","sourceRoot":"","sources":["../../../src/cli/actions/CleanAction.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAI3D,qDAA0E;AAG1E,MAAa,WAAY,SAAQ,+BAAc;IAG7C,YAAmB,OAA+B;QAChD,KAAK,CACH;YACE,UAAU,EAAE,OAAO;YACnB,OAAO,EAAE,mBAAmB;YAC5B,aAAa,EAAE,EAAE;SAClB,EACD,OAAO,CACR,CAAC;IACJ,CAAC;IAEM,kBAAkB;QACvB,KAAK,CAAC,kBAAkB,EAAE,CAAC;QAE3B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC;YAC/C,iBAAiB,EAAE,eAAe;YAClC,WAAW,EACT,2FAA2F;gBAC3F,sCAAsC;SACzC,CAAC,CAAC;IACL,CAAC;IAES,KAAK,CAAC,kBAAkB;QAChC,MAAM,UAAU,GAAe,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QAEtD,MAAM,iBAAiB,GAAuB;YAC5C,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK;SACzC,CAAC;QACF,MAAM,UAAU,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;QAEpD,MAAM,UAAU,CAAC,YAAY,EAAE,CAAC;IAClC,CAAC;CACF;AAnCD,kCAmCC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport { CommandLineFlagParameter } from '@rushstack/ts-command-line';\r\n\r\nimport { HeftActionBase, IHeftActionBaseOptions } from './HeftActionBase';\r\nimport { CleanStage, ICleanStageOptions } from '../../stages/CleanStage';\r\n\r\nexport class CleanAction extends HeftActionBase {\r\n  private _deleteCacheFlag!: CommandLineFlagParameter;\r\n\r\n  public constructor(options: IHeftActionBaseOptions) {\r\n    super(\r\n      {\r\n        actionName: 'clean',\r\n        summary: 'Clean the project',\r\n        documentation: ''\r\n      },\r\n      options\r\n    );\r\n  }\r\n\r\n  public onDefineParameters(): void {\r\n    super.onDefineParameters();\r\n\r\n    this._deleteCacheFlag = this.defineFlagParameter({\r\n      parameterLongName: '--clear-cache',\r\n      description:\r\n        \"If this flag is provided, the compiler cache will also be cleared. This isn't dangerous, \" +\r\n        'but may lead to longer compile times'\r\n    });\r\n  }\r\n\r\n  protected async actionExecuteAsync(): Promise<void> {\r\n    const cleanStage: CleanStage = this.stages.cleanStage;\r\n\r\n    const cleanStageOptions: ICleanStageOptions = {\r\n      deleteCache: this._deleteCacheFlag.value\r\n    };\r\n    await cleanStage.initializeAsync(cleanStageOptions);\r\n\r\n    await cleanStage.executeAsync();\r\n  }\r\n}\r\n"]}
{"version":3,"file":"startSubprocess.js","sourceRoot":"","sources":["../../../src/utilities/subprocess/startSubprocess.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;AAE3D,iEAKgC;AAEhC,MAAM,CAAC,EAAE,AAAD,EAAG,oBAAoB,EAAE,4BAA4B,EAAE,iCAAiC,CAAC,GAC/F,OAAO,CAAC,IAAI,CAAC;AAEf,8DAA8D;AAC9D,MAAM,sBAAsB,GAAQ,OAAO,CAAC,oBAAoB,CAAC,CAAC;AAClE,MAAM,6BAA6B,GAAa,MAAM,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,CAAC,MAAM,CACvG,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,KAAK,YAAY,CAC5C,CAAC;AACF,IAAI,6BAA6B,CAAC,MAAM,KAAK,CAAC,EAAE;IAC9C,MAAM,IAAI,KAAK,CACb,wCAAwC,oBAAoB,2CAA2C,CACxG,CAAC;CACH;AAOD,MAAM,qBAAqB,GACzB,sBAAsB,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3D,IAAI,CAAC,qBAAqB,CAAC,oDAA6B,CAAC,EAAE;IACzD,MAAM,IAAI,KAAK,CACb,wCAAwC,oBAAoB,6BAA6B;QACvF,6BAA6B,CAChC,CAAC;CACH;AAED,MAAM,kBAAkB,GAAkC,IAAI,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;AACnG,MAAM,uBAAuB,GAAW,IAAI,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;AAEtF,MAAM,gBAAgB,GAA6B,qBAAqB,CAAC,oBAAoB,CAC3F,qBAAqB,EACrB,kBAAkB,EAClB,uBAAuB,CACxB,CAAC;AAEF,gBAAgB,CAAC,qDAA8B,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport {\r\n  SubprocessRunnerBase,\r\n  ISubprocessInnerConfiguration,\r\n  SUBPROCESS_RUNNER_CLASS_LABEL,\r\n  SUBPROCESS_RUNNER_INNER_INVOKE\r\n} from './SubprocessRunnerBase';\r\n\r\nconst [, , subprocessModulePath, serializedInnerConfiguration, serializedSubprocessConfiguration] =\r\n  process.argv;\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst subprocessRunnerModule: any = require(subprocessModulePath);\r\nconst subprocessRunnerModuleExports: string[] = Object.getOwnPropertyNames(subprocessRunnerModule).filter(\r\n  (exportName) => exportName !== '__esModule'\r\n);\r\nif (subprocessRunnerModuleExports.length !== 1) {\r\n  throw new Error(\r\n    `The provided subprocess module path (${subprocessModulePath}) must only have a single value exported.`\r\n  );\r\n}\r\n\r\ndeclare class SubprocessRunnerSubclass extends SubprocessRunnerBase<object> {\r\n  public filename: string;\r\n  public invokeAsync(): Promise<void>;\r\n}\r\n\r\nconst SubprocessRunnerClass: typeof SubprocessRunnerSubclass =\r\n  subprocessRunnerModule[subprocessRunnerModuleExports[0]];\r\nif (!SubprocessRunnerClass[SUBPROCESS_RUNNER_CLASS_LABEL]) {\r\n  throw new Error(\r\n    `The provided subprocess module path (${subprocessModulePath}) does not extend from the ` +\r\n      'SubprocessRunnerBase class.'\r\n  );\r\n}\r\n\r\nconst innerConfiguration: ISubprocessInnerConfiguration = JSON.parse(serializedInnerConfiguration);\r\nconst subprocessConfiguration: object = JSON.parse(serializedSubprocessConfiguration);\r\n\r\nconst subprocessRunner: SubprocessRunnerSubclass = SubprocessRunnerClass.initializeSubprocess(\r\n  SubprocessRunnerClass,\r\n  innerConfiguration,\r\n  subprocessConfiguration\r\n);\r\n\r\nsubprocessRunner[SUBPROCESS_RUNNER_INNER_INVOKE].call(subprocessRunner).catch(console.error);\r\n"]}
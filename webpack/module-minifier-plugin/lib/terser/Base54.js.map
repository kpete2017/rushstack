{"version":3,"file":"Base54.js","sourceRoot":"","sources":["../../src/terser/Base54.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,+CAAiC;AACjC,4CAA0D;AAU1D,MAAM,MAAM,GAAa,MAAyC,CAAC,MAAM,CAAC;AAC1E,MAAM,SAAS,GAAe,MAAM,CAAC,KAAK,CAAC;AAC3C,MAAM,CAAC,KAAK,GAAG,GAAS,EAAE;IACxB,SAAS,EAAE,CAAC;IACZ,KAAK,IAAI,CAAC,GAAW,CAAC,EAAE,GAAG,GAAW,sCAA0B,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QACrF,MAAM,CAAC,QAAQ,CAAC,sCAA0B,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC;KACzD;IACD,MAAM,CAAC,IAAI,EAAE,CAAC;AAChB,CAAC,CAAC;AACF,MAAM,CAAC,KAAK,EAAE,CAAC;AAGb,MAAM,CAAC,YAAY,CAAC,SAIrB,CAAC,sBAAsB,GAAG,GAAS,EAAE;IACpC,oFAAoF;IACpF,MAAM,CAAC,KAAK,EAAE,CAAC;AACjB,CAAC,CAAC;AACF,YAAY","sourcesContent":["import * as terser from 'terser';\r\nimport { IDENTIFIER_TRAILING_DIGITS } from '../Constants';\r\n\r\n//#region Terser monkey-patch to remove character frequency analysis\r\ninterface IBase54 {\r\n  (ordinal: number): string;\r\n  consider: (token: string, weight: number) => void;\r\n  reset(): void;\r\n  sort(): void;\r\n}\r\n\r\nconst base54: IBase54 = (terser as unknown as { base54: IBase54 }).base54;\r\nconst coreReset: () => void = base54.reset;\r\nbase54.reset = (): void => {\r\n  coreReset();\r\n  for (let i: number = 0, len: number = IDENTIFIER_TRAILING_DIGITS.length; i < len; i++) {\r\n    base54.consider(IDENTIFIER_TRAILING_DIGITS[i], len - i);\r\n  }\r\n  base54.sort();\r\n};\r\nbase54.reset();\r\n\r\n(\r\n  terser.AST_Toplevel.prototype as {\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    compute_char_frequency?: () => void;\r\n  }\r\n).compute_char_frequency = (): void => {\r\n  // TODO: Expose hook for exporting character frequency information for use in config\r\n  base54.reset();\r\n};\r\n//#endregion\r\n"]}
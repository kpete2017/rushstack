{"version":3,"file":"MinifierWorker.js","sourceRoot":"","sources":["../../src/workerPool/MinifierWorker.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;AAE3D,iEAA8D;AAE9D,mDAAwD;AAGxD,MAAM,aAAa,GAAkB,2BAAU,CAAC;AAEhD,yDAAyD;AACzD,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC;AAErB,2BAAW,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC,OAAmC,EAAE,EAAE;IAChE,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KACjB;IAED,MAAM,MAAM,GAA8B,mCAAgB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;IAEnF,2BAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AAClC,CAAC,CAAC,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\r\n// See LICENSE in the project root for license information.\r\n\r\nimport { minifySingleFile } from '../terser/MinifySingleFile';\r\nimport { MinifyOptions } from 'terser';\r\nimport { parentPort, workerData } from 'worker_threads';\r\nimport { IModuleMinificationRequest, IModuleMinificationResult } from '../ModuleMinifierPlugin.types';\r\n\r\nconst terserOptions: MinifyOptions = workerData;\r\n\r\n// Set to non-zero to help debug unexpected graceful exit\r\nprocess.exitCode = 2;\r\n\r\nparentPort!.on('message', (message: IModuleMinificationRequest) => {\r\n  if (!message) {\r\n    process.exit(0);\r\n  }\r\n\r\n  const result: IModuleMinificationResult = minifySingleFile(message, terserOptions);\r\n\r\n  parentPort!.postMessage(result);\r\n});\r\n"]}